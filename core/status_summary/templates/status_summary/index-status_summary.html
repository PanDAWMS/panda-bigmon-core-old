{% extends "_base_bigpandamon.html" %}{% load url from future %}

{% block title %}PanDA Activity Summary{% endblock %}
{% block page_title %}PanDA Activity Summary{% endblock %}
{% block bl_page_title %}PanDA Activity Summary{% endblock %}
{% block gacode %}UA-44940804-1{% endblock %}
{% block gaweb %}pandawms.org{% endblock %}
{% block subtitle %}Activity Summary{% endblock %}

{% block header-nav-chain-1 %}{% endblock %}{% block header-nav-chain-1-separator %}{% endblock %}
{% block header-nav-chain-2 %}{% endblock %}{% block header-nav-chain-2-separator %}{% endblock %}
{% block header-nav-chain-3 %}{% endblock %}{% block header-nav-chain-3-separator %}{% endblock %}
{% block header-nav-chain-4 %}{% endblock %}{% block header-nav-chain-4-separator %}{% endblock %}
{% block header-nav-chain-5 %}{% endblock %}{% block header-nav-chain-5-separator %}{% endblock %}
{% block header-nav-chain-6 %}{% endblock %}
{% block left_menu %}{% endblock %}
{% block body_mobile %}{% endblock %}
{% block body %}
{% if errors_GET %}
{% if errors_GET.noparams %}
	<div><span style="color: orange; font-weight: bold;">Query warning.</span> {{errors_GET.noparams}}</div>
{% else %}
{% if errors_GET.startdate %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.startdate}}</div>{% endif %}
{% if errors_GET.enddate %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.enddate}}</div>{% endif %}
{% if errors_GET.ndays %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.ndays}}</div>{% endif %}
{% endif %}
{% endif %}
{% if starttime %}<div><span style="color: navy; font-weight: bold;">starttime:</span> {{starttime}} </div>{% endif %}
{% if endtime %}<div><span style="color: navy; font-weight: bold;">endtime:</span> {{endtime}} </div>{% endif %}
{% if nhours %}<div><span style="color: navy; font-weight: bold;">nhours:</span> {{nhours}} </div>{% endif %}
{% if GETparams %}
	<div><span style="color: navy; font-weight: bold;">GET parameters:</span> 
	<table>	
		{% for key,value in GETparams.items %}
			<tr>
				<td>{{key}}</td>
				<td>{{value}}</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endif %}
{% if query %}
	<div><span style="color: navy; font-weight: bold;">Query:</span> <br/>
	<table>	
		{% for key,value in query.items %}
			<tr>
				<td>{{key}}</td>
				<td>{{value}}</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endif %}
	<div><span style="color: navy; font-weight: bold;">
	Filters and API documentation:</span> available in 
	<a href="https://github.com/PanDAWMS/panda-bigmon-core/blob/wenaus/core/status_summary/README-API.md">README-API</a>.
	</div>
{% if data %}
<br/><br/>
<table id="dataset">
<thead>
    {% include "status_summary/header-status_summary.html" %}
</thead>
<tbody>
{% for item in data %}
{% if forloop.counter|divisibleby:"10" %}
    {% include "status_summary/header-status_summary.html" %}
{% endif %}
<tr>
<td>{{item.cloud}}</td>
<td>{{item.atlas_site}}</td>
<td>{{item.mcp_cloud}}</td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}">{{item.computingsite}}</a></td>
<td>{{item.corecount|default_if_none:"1"}}</td>
<td>{{item.status}} / {{item.comment|default_if_none:"&mdash;"}}</td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=defined">{{item.defined|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=waiting">{{item.waiting|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=pending">{{item.pending|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=assigned">{{item.assigned|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=throttled">{{item.throttled|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=activated">{{item.activated|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=sent">{{item.sent|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=starting">{{item.starting|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=running">{{item.running|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=holding">{{item.holding|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=transferring">{{item.transferring|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=finished">{{item.finished|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=failed">{{item.failed|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=cancelled">{{item.cancelled|default_if_none:"&mdash;"}}</a></td>
<td><a href="/jobs/?display_limit=100&amp;computingsite={{item.computingsite}}&amp;jobstatus=merging">{{item.merging|default_if_none:"&mdash;"}}</a></td>
</tr>
{% endfor %}
</tbody>
<tfoot>
    {% include "status_summary/header-status_summary.html" %}
</tfoot>
</table>
	<div><span style="color: navy; font-weight: bold;">
	Filters and API documentation:</span> available in 
	<a href="https://github.com/PanDAWMS/panda-bigmon-core/blob/wenaus/core/status_summary/README-API.md">README-API</a>.
	</div>
{% else %}
<div><span style="color: orange; font-weight: bold;">Result warning.</span> No entry satisfied your query parameters.</div>
{% endif %}
{% endblock %}



{% extends "_base_lsst.html" %}{% load url from future %}

{% block page_title %} {{ viewParams.MON_VO }} PanDA dataset {{ datasetname }} {% endblock %}
{% block title %} <a href="{% url 'index' %}">{{ viewParams.MON_VO }} PanDA monitor</a>{% endblock %}
{% block subtitle %}PanDA dataset <b>{{ datasetname }}</b>{% endblock %}

{% block body %}

{% if columns %}

<div class='section'> Dataset {{ datasetname }}</div>

<table>
<tr>
	<th>ID</th>
	<th>Type</th>
	<th>Stream</th>
	<th>Task</th>
	<th>State</th>
	<th>Status</th>
	<th>Nfiles</th>
	<th>Created</th>
	<th>Modified</th>
</tr>
	<tr>
		<td>{{ dsrec.datasetid }}</td>
		<td>{{ dsrec.type }}</td>
		<td>{{ dsrec.streamname }}</td>
		<td><a href="{% url 'taskInfo' %}?jeditaskid={{ dsrec.jeditaskid }}">{{ dsrec.jeditaskid }}</a></td>
		<td>{{ dsrec.state }}</td>
		<td class='{{dsrec.status}}'>{{ dsrec.status }}</td>
		<td>{{ dsrec.nfiles }}</td>
		<td>{{ dsrec.creationtime|date:"Y-m-d H:i" }}</td>
		<td>{{ dsrec.modificationtime|date:"Y-m-d H:i" }}</td>
	</tr>
</table>

<p>

{% if dsrec.vuid %}

This is an old-format (as opposed to JEDI) dataset.

{% else %}

<div class='section'><a href="{% url 'fileList' %}?datasetname={{ datasetname }}">Show files in dataset</a></div>

<p>
Documentation on PanDA JEDI datasets:
<a href="https://twiki.cern.ch/twiki/bin/view/PanDA/PandaJEDI#Transition_of_dataset_status">status transitions</a>,
<a href="https://twiki.cern.ch/twiki/bin/view/PanDA/PandaJEDI#The_JEDI_Datasets_table">schema</a>.

{% endif %}

<p>

<div class='section'> All dataset attributes</div>

<table>
{% for col in columns %}
<tr><th>{{ col.name }} </th><td> {% if col.value != 'None' %} {{ col.value }} {% endif %}</td></tr>
{% endfor %}
</table>

{% else %}

PanDA dataset <b>{{ datasetname }}</b> not found.

{% endif %}

{% endblock %}

{% block left_menu %}
{% comment %}
<div class="left-menu">
  {% block left_menu_content %}
    <span class="left-menu-title">Menu</span>
     <br> <a class="left-menu-item" href="{{ prefix }}/#">Home</a>
  {% endblock %}
</div>
{% endcomment %}
{% endblock %}

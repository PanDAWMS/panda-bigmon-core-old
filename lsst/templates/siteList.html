{% extends "_base_lsst.html" %}
{% load url from future %}

{% block page_title %} {{ viewParams.MON_VO }} PanDA sites{% endblock %}
{% block title %} <a href="/">{{ viewParams.MON_VO }} {{ APP_NAME }}</a>{% endblock %}
{% block subtitle %}PanDA site list{{viewParams.selection }}
{% if vo %} &nbsp; for VO {{ vo }}
{% endif %}
{% endblock %}
{% block body %}

{% if sites %}

<div class='section'>Site attribute summary</div>

<table>
{% for field, fdict in sumd.items %}
<tr><th> {{ field }} </th><td>
{% for key, value in fdict.items %}
&nbsp; {% if field == 'status' %} <span class='{{key}}'> {% else %} <span> {% endif %}  {{ key }} </span>
<a href="{{xurl}}{{field}}={{key}}">({{ value }})</a>
{% endfor %}
</td></tr>
{% endfor %}
</table>

<div class='section'>Site list</div>

<table>
<tr>
	<th>Site name</th>
	<th>GOC site</th>
	<th>Cloud</th>
	<th>Region</th>
	<th>Status</th>
	<th>Last mod</th>
	<th>email</th>
	<th>Tier</th>
	<th>FAX redirect</th>
	<th>Max mem (MB)</th>
	<th>Max time (s)</th>
	<th>Multicloud</th>
</tr>
    {% for site in sites %}
	<tr>
		<td><a href="{% url 'lsst.views.siteInfo' site.siteid %}">{{ site.siteid }}</a></td>
		<td> {{ site.gocname }}</td>
		<td> {{ site.cloud }}</td>
		<td> {{ site.region }}</td>
		<td class='{{site.status}}'>{{ site.status }}</td>
		<td> {{ site.lastmod|date:"Y-m-d H:i" }}</td>
		<td> {% if site.email %} {{ site.email }} {% endif %}</td>
		<td> {{ site.tier }}</td>
		<td> {{ site.faxredirector }}</td>
		<td> {% if site.maxmemory > 0 %} {{ site.maxmemory }} {% endif %}</td>
		<td> {% if site.maxtime > 0 %} {{ site.maxtime }} {% endif %}</td>
		<td> {{ site.multicloud }}</td>
	</tr>
    {% endfor %}
</table>

{% else %}
    <p>No matches to query.</p>
{% endif %}
{% endblock %}

{% block bottom_info %}
{% endblock %}

{% block left_menu %}
{% comment %}
<div class="left-menu">
  {% block left_menu_content %}
    <span class="left-menu-title">Menu</span>
     <br> <a class="left-menu-item" href="{{ prefix }}/#">Home</a>
  {% endblock %}
</div>
{% endcomment %}
{% endblock %}

